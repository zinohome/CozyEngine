## 03. 核心概念与术语

> **文档版本**: v2.0  
> **更新日期**: 2026-01-09  


### 3.1 业务概念

- **User（用户）**：鉴权主体（账号/匿名），拥有会话与画像。
- **Session（会话）**：对话容器；绑定用户与人格；包含消息序列与统计信息。
- **Message（消息）**：对话单元；role ∈ {system,user,assistant,tool}；含元数据（来源、耗时、token、是否语音等）。
- **Personality（人格）**：驱动对话行为的配置集合：system prompt、模型选择、工具白名单、记忆策略、语音策略等。

### 3.2 技术概念

- **Orchestrator（编排器）**：对话请求的“总导演”，不做具体实现细节，只调度服务与引擎。
- **Context Bundle（上下文包）**：上下文层对外的统一输出结构（系统提示词、历史消息、摘要、检索记忆、用户画像、元数据、token 预算）。
- **Engine（引擎）**：对外提供稳定接口、对内可替换实现的能力模块。
- **Plugin（插件）**：引擎的一种加载形态：内置/外置（Python 包）/配置声明。

### 3.3 三大人格化引擎术语

- **Knowledge**：面向“知识回答”的检索/写入能力；可多数据集（dataset）。
- **UserProfile**：面向“理解用户”的结构化/文本化画像能力。
- **ChatMemory**：面向“对话连贯”的短期/会话级记忆能力（写入可异步）。

### 3.4 兼容性术语

- **OpenAI Compatible API**：对外兼容 OpenAI Chat Completions 请求/响应结构与 SSE 事件格式。
- **CozyChat Compatible API**：为现有前端/客户端保留的业务接口（会话列表、消息历史、人格列表、工具列表、音频等）。

### 3.5 设计中的“硬约束词”

- **必须（MUST）**：不满足就视为不合格实现。
- **应该（SHOULD）**：默认按此实现；有充分理由可例外并记录 ADR。
- **可以（MAY）**：实现可选项。

