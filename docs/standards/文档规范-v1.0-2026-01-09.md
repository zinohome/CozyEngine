## CozyEngine 文档规范

> **文档版本**: v1.0  
> **更新日期**: 2026-01-09  

### 1. 目标

- 保证文档可发现、可版本化、可审计
- 保证“设计 → 实现”一致：任何设计变更必须同步更新文档版本

### 2. 目录规范（MUST）

- 所有文档必须放在 `docs/` 下，并按用途分子目录：
  - `docs/engine-v2/`：CozyEngine v2 设计文档（主设计依据）
  - `docs/standards/`：规范类（命名、文档、代码风格、评审流程）
  - `docs/adr/`：架构决策记录（ADR）
  - `docs/api/`：对外/对内 API 说明（若需要从设计中拆出）
  - `docs/runbooks/`：部署/运维/故障排查
  - `docs/reports/`：一次性分析报告（不作为主设计依据）

### 3. 文件命名规范（MUST）

- 文件名必须包含版本与日期：

`<主题>-vX.Y-YYYY-MM-DD.md`

示例：

- `编排与上下文构建-v2.0-2026-01-09.md`
- `ADR-0001-插件注册机制-v1.0-2026-01-09.md`

### 4. 文档头部信息（MUST）

每个文档顶部必须包含：

- `> **文档版本**: vX.Y`
- `> **更新日期**: YYYY-MM-DD`

（建议）再补充：

- `> **状态**: draft|active|deprecated`
- `> **适用范围**: CozyEngine backend / docs / ...`

### 5. 版本策略（MUST）

- **patch（v2.0 -> v2.0.1）**：错别字、非行为变化、补充示例
- **minor（v2.0 -> v2.1）**：接口/行为/边界变化，但总体架构不变
- **major（v2.x -> v3.0）**：架构级变化或兼容性断裂

版本升级时必须：

- 更新文档内版本与更新日期
- 重命名文件以体现新版本（保留同一主题的“唯一主文档”）

### 6. 设计变更纪律（MUST）

- 开发必须严格对齐 `docs/engine-v2/`。
- 如果实现需要偏离设计：
  - 先修改对应设计文档（原文件）并升级版本
  - 必要时新增 ADR 记录关键决策
  - 再修改代码
- 禁止随意新建设计文档分叉主题；允许新增的只有：
  - 新主题（之前不存在）
  - ADR（决策记录）
  - runbook（运维手册）

